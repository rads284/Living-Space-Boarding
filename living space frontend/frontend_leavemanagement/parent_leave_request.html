
<script>
 var obj =
    {
        xhr: new XMLHttpRequest(), 
        
        check: function(){
                var from = document.getElementById("date1");
                console.log(from.value);
                var to = document.getElementById("date2");
                var reason = document.getElementById("reason");
                var sid = document.getElementById("sid")
                //console.log(this);
                obj.xhr.onreadystatechange=this.showMsg;
                obj.xhr.open("POST", "http://localhost:5000/notify_parent", true);//asynchronous
                //don't add this!! This and Post should not be set together, post will set the header automatically!! obj.xhr.setRequestHeader("Content-type", " application/x-www-form-urlencoded");
                var fd = new FormData();
                console.log(from.value,to.value,reason.value)
                fd.append("from", from.value);
                fd.append("to", to.value);
                fd.append("reason", reason.value);
                fd.append("sid", sid.value);
                obj.xhr.send(fd);
                
            },
        showMsg : function(){
                if(this.readyState == 4 && this.status == 200){
                    document.getElementById("stat").innerHTML = this.responseText;
                }
        },
    
    
    displayForm : function(){
        
    clr = document.getElementById("CLR");
    clr.disabled = true;
    br0 = document.createElement("br");
    var t0 = document.createTextNode("Student ID");
    
    var sid = document.createElement("input"); //input element, text
    sid.setAttribute('type',"text");
    sid.setAttribute('id',"sid");
    sid.required;
    br4 = document.createElement("br");
    var t1 = document.createTextNode("From");
    var date1 = document.createElement("input"); //input element, text
    date1.setAttribute('type',"date");
    date1.setAttribute('id',"date1");
    br1 = document.createElement("br");
    var t2 = document.createTextNode("   To");
    var date2 = document.createElement("input"); //input element, text
    date2.setAttribute('type',"date");
    date2.setAttribute('id',"date2");
    date1.required;
    
    br2 = document.createElement("br");
        
        
    var t3 = document.createTextNode("Reason");
    var reason = document.createElement("input"); //input element, text
    reason.setAttribute('type',"text");
    reason.setAttribute('id',"reason");
    reason.required;
    br3 = document.createElement("br");
    
    var submit = document.createElement("input"); //input element, Submit button
    submit.setAttribute('type',"submit");
    submit.setAttribute('value',"Submit");
    submit.addEventListener("click", this.check);
    document.body.appendChild(br0);
    document.body.appendChild(t0);
    document.body.appendChild(sid);
    document.body.appendChild(br4);
    document.body.appendChild(t1);
    document.body.appendChild(date1);
    document.body.appendChild(t2);
    document.body.appendChild(date2);
    document.body.appendChild(br2);
    document.body.appendChild(t3);
    document.body.appendChild(reason);
    document.body.appendChild(br3);
    document.body.appendChild(submit);
        
},
        
    
    
    
}



</script>


<html>
<!--Warden clicks on Create Leave Request button- opens up a form which has 2 fields - date and reason - on submit- /notify parent 
need to send from , to date along with reason to parent -->
<button id = "CLR" onclick = "obj.displayForm()">Create Leave Request </button>
 <p id = "stat"></p>   
</html>
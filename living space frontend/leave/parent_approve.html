
<script>
     var server_addr="http://192.168.43.26:8080" 
 var obj =
    {
        xhr: new XMLHttpRequest(), 
        
        check: function(){
                var pid = document.getElementById("pid")
                //console.log(this);
                obj.xhr.onreadystatechange=this.showMsg;
                obj.xhr.open("POST", server_addr+"/approve_leave", true);//asynchronous
                //don't add this!! This and Post should not be set together, post will set the header automatically!! obj.xhr.setRequestHeader("Content-type", " application/x-www-form-urlencoded");
                var fd = new FormData();
                console.log(pid.value)

                fd.append("pid", pid.value);
                obj.xhr.send(fd);
                
            },
        showMsg : function(){
                if(this.readyState == 4 && this.status == 200){
                    document.getElementById("stat").innerHTML = this.responseText;
                }
        },
    
    
    displayForm : function(){
        
    clr = document.getElementById("CLR");
    clr.disabled = true;
    br0 = document.createElement("br");
   
    br4 = document.createElement("br");
    var t1 = document.createTextNode("Enter Parent ID:");
    var pid = document.createElement("input"); //input element, text
    pid.setAttribute('type',"text");
    pid.setAttribute('id',"pid");
    pid.required;
    br2 = document.createElement("br");
    var t2 = document.createTextNode("Enter Otp:");
    var otp = document.createElement("input"); //input element, text
    otp.setAttribute('type',"text");
    otp.setAttribute('id',"pid");
    otp.required;
    br3 = document.createElement("br");
        
    var submit = document.createElement("input"); //input element, Submit button
    submit.setAttribute('type',"submit");
    submit.setAttribute('value',"Submit");
    submit.addEventListener("click", this.check);
        
    document.body.appendChild(br0);
    document.body.appendChild(br4);
    document.body.appendChild(t1);
    document.body.appendChild(pid);
    document.body.appendChild(br2);
    document.body.appendChild(t2);
    document.body.appendChild(otp);
    document.body.appendChild(br3);
    document.body.appendChild(submit);
        
},
        
    
    
    
}



</script>


<html>
<!--Warden clicks on Create Leave Request button- opens up a form which has 2 fields - date and reason - on submit- /notify parent 
need to send from , to date along with reason to parent -->
<button id = "CLR" onclick = "obj.displayForm()">Approve Leave Request </button>
 <p id = "stat"></p>   
</html>